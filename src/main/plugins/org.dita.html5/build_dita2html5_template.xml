<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is part of the DITA Open Toolkit project.
     See the accompanying license.txt file for applicable licenses.-->
<project xmlns:dita="http://dita-ot.sourceforge.net" name="dita2html5">

  <target name="dita2html5.init">
    <property name="html-version" value="html5"/>
    <condition property="args.xsl" value="${dita.plugin.org.dita.html5.dir}/xsl/dita2html5.xsl">
      <not>
        <isset property="args.xsl" />
      </not>
    </condition>
    <condition property="args.xhtml.toc.xsl" value="${dita.plugin.org.dita.html5.dir}/xsl/map2html5-cover.xsl">
      <not>
        <isset property="args.xhtml.toc.xsl" />
      </not>
    </condition>
  </target>
  
  <target name="dita2html5"
          depends="dita2html5.init,
                   build-init,
                   preprocess, 
                   xhtml.topics,
                   dita.map.xhtml,
                   html5-copy-css"/>
  
  <target name="html5-copy-css" unless="user.csspath.url" description="Copy CSS files">
    <condition property="user.copycss.yes">
      <and>
        <equals arg1="${args.copycss}" arg2="yes"/>
        <isset property="args.css.present"/>
      </and>
    </condition>
    <property name="user.csspath.real" location="${output.dir}/${user.csspath}"/>
    <mkdir dir="${user.csspath.real}"/>
    <!-- Always copy system default css files -->
    <copy todir="${user.csspath.real}">
      <fileset dir="${dita.plugin.org.dita.html5.dir}/resource" includes="*.css"/>
    </copy>
    <!-- Copy user specify css file when required -->
    <antcall target="html5-copy-css-user"/>
  </target>
  
  <target name="html5-copy-css-user" if="user.copycss.yes">
    <copy file="${args.css.real}" todir="${user.csspath.real}"/>
  </target>
  
  
</project>
